!function(){var t={274:function(){$((function(){if(!($("#rdv-registration-form").length<1)){window.onSubmit=function(){document.getElementById("rdv-registration-form").submit()};var t=!1,e=$("html").attr("lang");$.datetimepicker.setLocale(e),$("#date").datetimepicker({dayOfWeekStart:1,format:"d/m/Y",timepicker:!1,timepickerScrollbar:!1,scrollMonth:!1,scrollInput:!1,minDate:0}),$("select.select2").select2({language:e,width:"100%",sorter:function(t){return t.sort((function(t,e){return t.id?e.id?t.text.localeCompare(e.text):1:-1}))}}),$("li.error").each((function(){var t=$(this).data("param");t&&$("input#"+t).addClass("is-invalid")}));var o=function(t,e){e=!!e,t=$(t);var o=new Option(t.text(),t.attr("value"),e,e);return $(o).data($(t).data())},i=function(){var t=$("#date").val(),e=$("#purpose option:selected").val(),o=$("#departments option:selected").toArray(),i=!0;$("#slots a.btn-slot").each((function(){if(t&&t===$(this).data("date")){var a=$(this).data(e);"discover"===e&&(0===o.length?a=a||$(this).data("discoverbags"):$("#departments option[value=bags]:selected").length>0&&(a=$(this).data("discoverbags"))),a?($(this).toggle(!0),i=!1):$(this).toggle(!1)}else $(this).toggle(!1)})),$("#noslots").toggle(i),$("#id_slot").val(""),$("a.btn-slot.active").removeClass("active");var a=$("#ori_id_slot").val(),n=a&&$("a.btn-slot[data-id="+a+"]");a&&n.is(":visible")&&($("#id_slot").val(a),n.addClass("active"));var r=$("#purpose option:selected").data("optionaldept");$("label[for=departments]").toggleClass("required",!r)},a=function(){var e=$("#id_store").val();e&&(s(),$.get("/form/slots?id_store="+e,(function(e){$("#slots").html(e),n(),i(),t=!0})))},n=function(){var t=[];$("#slots > a").each((function(){var e=$(this).data("date");t.indexOf(e)<0&&t.push(e)})),t.length>0?($("#date").removeAttr("disabled"),$("#date").val()||$("#date").val(t[0]),$("#date").datetimepicker({allowDates:t,formatDate:"d/m/Y"})):$("#date").attr("disabled","true")},r=$("#purpose option").toArray(),s=function(t){var e=$("#id_store option:selected");if(e&&e.data("purposes")){var i=[],a=e.data("purposes").split(",");$("#purpose option").remove(),r.forEach((function(t){a.indexOf($(t).attr("value"))>-1&&i.push($(t).data("type"))}));var n=i.indexOf("store")>-1&&i.indexOf("phone")>-1;$("#types").toggle(n);var s=null;n&&((s=$("#types input:checked").attr("value"))||$("#types input").each((function(){$(this).attr("value")===$(this).data("value")&&(s=$(this).attr("value"))})));var l=$("#purpose").data("value");r.forEach((function(t){a.indexOf($(t).attr("value"))>-1&&(!s||s===$(t).data("type"))&&$("#purpose").append(o(t,$(t).attr("value")===l))})),$("#purpose").trigger("change")}},l=$("#id_store option").toArray();$(document).on("click",".btn-slot",(function(t){t.preventDefault(),$(".btn-slot").removeClass("active"),$(this).addClass("active"),$("#id_slot").val($(this).attr("data-id")),$("#ori_id_slot").val("")})),$("#id_country").on("change",(function(){var e=$("#id_country option:selected").attr("value");$("#id_store option").each((function(){$(this).attr("value")&&$(this).remove()})),l.forEach((function(t){String($(t).data("country"))===e&&$("#id_store").append(o(t))})),t&&a()})),$("#id_store").on("change",a),$("#types input[type=radio]").on("change",s),$("#purpose").on("change",i),$("#departments").on("change",i),$("#date").on("change",i)}}))},196:function(t,e,o){window.console||(window.console={}),window.console.log||(window.console.log=function(){}),o(820),$((function(){window.showQrcodes=function(){$("#qrcodediv").each((function(){var t=$(this).data("text"),e=$(this).data("size")||200,o=kjua({text:t,size:e});$(this).append(o)}))},showQrcodes(),$((function(){$(".table-sort-asc, .table-sort-desc").on("click",(function(){var t=$(this).data("sort"),e=$("input[name=sort]");e.val(t),e.closest("form").trigger("submit")}))}))}))},820:function(){"use strict";"find"in Array.prototype||(Array.prototype.find=function(t,e){for(var o=0;o<this.length;o++)if(t.call(e,this[o],o,this))return this[o];return null}),"assign"in Object.prototype||(Object.assign=function(t,e){t||(t={});for(var o=Object(t),i=1;i<arguments.length;i++){var a=arguments[i];if(null!=a)for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(o[n]=a[n])}return o})},513:function(t,e,o){"use strict";o.r(e)}},e={};function o(i){var a=e[i];if(void 0!==a)return a.exports;var n=e[i]={exports:{}};return t[i](n,n.exports,o),n.exports}o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o(513),o(196),o(274),$((function(){$("select").each((function(){var t=$(this),e=t.data("value");e&&e.split?e.split(",").forEach((function(e){t.find('option[value="'+e+'"]').prop("selected",!0),t.find('option[value="'+e.toUpperCase()+'"]').prop("selected",!0)})):e&&t.find('option[value="'+e+'"]').prop("selected",!0),t.trigger("change")})),$("input[type=radio]").each((function(){var t=$(this),e=t.data("value");e&&e===t.attr("value")&&t.prop("checked",!0)})),$("#client-screen").length&&setInterval((function(){var t=window.location.href.split("?")[0]+"?ajax=1";$.get(t,(function(t){"notfound"!==t?($("#client-screen").html(t),showQrcodes()):window.location.href="/client"}))}),1e4),$("li.error").each((function(){var t=$(this).data("param");console.log(t),t&&($("input#"+t).addClass("is-invalid"),console.log({param:t}),"phone_number"===t&&$("select#phone_country").addClass("is-invalid"))})),$("form#client-registration-form input, form#rdv-registration-form input").on("input",(function(t){var e=$(this).val(),o=e.replace(/[^\u0000-\u007F\u0080-\u00FF]/g,"");e!==o&&$(this).val(o)}));var t=function(){var t=!0;t=t&&$("#name").val()&&$("#surname").val()&&$("#phone_number").val().length>=8&&$("#email").val()&&$("#passport_id").val()&&$("#cgu").is(":checked")&&$("#processing").is(":checked"),$("form#client-registration-form button[type=submit").prop("disabled",!t)};$("form#client-registration-form input, form#rdv-registration-form select").on("change",t),$("form#client-registration-form input, form#rdv-registration-form select").on("keyup",t),$("form#client-registration-form input, form#rdv-registration-form select").on("click",t),t(),"accepted"!==window.Cookies.get("policy")&&($(".cookies-policy").show(),window.Cookies.set("policy","accepted",{expires:395,sameSite:"Lax"})),$(".cookies-policy .btn-close").on("click",(function(){window.Cookies.set("policy","accepted",{expires:395,sameSite:"Lax"}),$(".cookies-policy").remove()})),$("#client-registration-form").length>0&&(window.onSubmit=function(){document.getElementById("client-registration-form").submit()})}))}();
//# sourceMappingURL=client-92cece1efb473677d29cb6ed342e4bde.js.map